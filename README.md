# Вступление

- приложение `!!br-schedule!!`
- это приложение для визуализации рабочего графика работы по 4-х дневному циклу:
    - 1-й день: работа в день c 8:00 до 20:00
    - 2-й день: работа в ночь с 20:00 текущего дня до 8:00 следующего дня
    - 3-й день: выходной с 8:00 утра
    - 4-й день: выходной весь день
- в приложении предусмотрена возможность визуализировать графики для нескольких работников (выпадающий список F1F); пользователь выбирает работника и настраивает график для него

# Разное

- коды F_F (счётчик, увеличиваем на 1 когда нужен новый код): 7

# UI-структура

ДИСКЛЕЙМЕР: строки начинающиеся с `- : ` это не элементы структуры, а сопутствующие описания

## Главный экран

- toolbar с заголовком "Br Schedule"
    - меню "три точки"
        - пункт "О приложении"; при нажатии открывается экран с информацией о текущем приложении
        - пункт "Переименовать работника"; при нажатии открывается диалог переименования текущего выбранного работника
- F1F выпадающий список с пунктами:
    - работник 1 (выбран по умолчанию)
    - работник 2
    - работник 3
    - работник 4
- F2F блок настройки графика конкретного работника:
    - F4F блок с кнопками (горизонтальный):
        - F5F кнопка-иконка сдвигания графика вверх на один шаг
        - F6F кнопка-иконка сдвигания графика вниз на один шаг
        - кнопка-иконка в виде замка; при нажатии на неё кнопки F5F и F6F дизейблятся/раздизебляются циклически (заблокированы → разблокированы → заблокированы → ...)
            - : визуальное состояние замка:
                - когда кнопки F5F и F6F заблокированы (disabled): иконка замка закрыта/заперта (например, серый цвет)
                - когда кнопки F5F и F6F разблокированы (enabled): иконка замка открыта/разблокирована (например, зелёный или обычный цвет)
            - : цель: предотвратить случайное сдвигание графика при случайном нажатии на кнопки F5F и F6F
    - F3F блок с датами:
        - : бесконечный вертикальный список (RecyclerView/ScrollView) с элементами-днями
        - : список прокручивается в любую сторону (вверх - прошлые даты, вниз - будущие даты)
        - : элементы генерируются автоматически по мере прокрутки списка
        - : при открытии экрана список позиционируется на текущий день (сегодня)
        - элемент списка:
            - дата (число и день недели, например "1 фев, Пн")
            - визуальный индикатор типа дня:
                - : варианты:
                    - "День" (работа с 8:00 до 20:00) - зелёный цвет/иконка солнца
                    - "Ночь" (работа с 20:00 до 8:00 следующего дня) - синий/тёмный цвет/иконка луны
                    - "Выходной" (3-й день цикла, выходной с 8:00) - жёлтый/оранжевый цвет/иконка
                    - "Выходной" (4-й день цикла, весь день) - серый цвет/иконка
            - временнАя метка для рабочих дней (например, "8:00-20:00" для дневной смены, "20:00-8:00" для ночной)
        - : текущая дата (сегодня) выделяется особым образом (например, рамкой, другим цветом фона или акцентной полосой)
        - : при прокрутке вверх (к прошлым датам) элементы добавляются автоматически перед первым видимым элементом
        - : при прокрутке вниз (к будущим датам) элементы добавляются автоматически после последнего видимого элемента
        - : тип дня для каждого элемента вычисляется на основе 4-дневного цикла работника и его текущего смещения графика

## F7F Диалог переименования работника

- открывается при нажатии на пункт меню "Переименовать работника" в toolbar
- переименовывается текущий выбранный работник (тот, который выбран в выпадающем списке F1F)
- структура диалога:
    - заголовок: "Переименовать работника"
    - текстовое поле (EditText) с текущим именем работника:
        - имя выделено и готово к редактированию
        - курсор установлен в конец текста
        - поддерживается стандартное редактирование текста
    - кнопка "Сохранить":
        - применяет изменения и закрывает диалог
        - при невалидном имени показывает сообщение об ошибке
    - кнопка "Отмена":
        - закрывает диалог без сохранения изменений
- валидация при сохранении:
    - проверка на пустое имя
    - проверка на имя из одних пробелов
    - проверка максимальной длины (50 символов)
    - при ошибке показывается сообщение под полем ввода

## Экран "О приложении"

- toolbar с заголовком "О приложении" и кнопкой "Назад"
- блок с информацией:
    - иконка приложения
    - название приложения: "Br Schedule"
    - версия приложения (например, "Версия 1.0.0")
    - описание: краткое описание функциональности приложения
    - информация о разработчике (опционально)
    - кнопка "Закрыть" или автоматическое закрытие при нажатии "Назад"

# Логика работы

## Инициализация графика

- при первом запуске для каждого работника создаётся график, начинающийся с текущей даты
- начальный тип дня определяется случайно или по умолчанию (например, начинается с "День")
- график строится по циклу: День → Ночь → Выходной (с 8:00) → Выходной (весь день) → День → ...

## Блокировка кнопок сдвига графика

- кнопка-замок в блоке F4F управляет состоянием кнопок F5F и F6F (сдвиг графика вверх/вниз)
- при нажатии на кнопку-замок происходит переключение состояния:
    - если кнопки F5F и F6F были активны (enabled) → они становятся заблокированными (disabled)
    - если кнопки F5F и F6F были заблокированы (disabled) → они становятся активными (enabled)
- визуальная индикация состояния:
    - заблокированные кнопки F5F и F6F: серый цвет, полупрозрачные, не реагируют на нажатия
    - активные кнопки F5F и F6F: обычный цвет, полностью непрозрачные, реагируют на нажатия
    - иконка замка меняется в зависимости от состояния (закрытый замок = заблокировано, открытый замок = разблокировано)
- состояние блокировки сохраняется локально и восстанавливается при следующем запуске приложения
- состояние блокировки может быть индивидуальным для каждого работника или общим для всех (на усмотрение разработчика)

## Сдвиг графика

- при нажатии кнопки F5F "вверх" (если она не заблокирована) весь график работника сдвигается на один день назад (цикл смещается влево)
- при нажатии кнопки F6F "вниз" (если она не заблокирована) весь график работника сдвигается на один день вперёд (цикл смещается вправо)
- если кнопки F5F и F6F заблокированы, нажатия на них игнорируются (график не изменяется)
- сдвиг применяется ко всему графику работника, а не только к видимой неделе
- изменения сохраняются автоматически при каждом сдвиге

## Навигация по списку дат

- по умолчанию список позиционируется на текущий день (сегодня)
- пользователь может прокручивать список вверх (к прошлым датам) или вниз (к будущим датам)
- элементы списка генерируются динамически по мере прокрутки
- при прокрутке вверх генерируются элементы для прошлых дат (от текущей позиции вверх)
- при прокрутке вниз генерируются элементы для будущих дат (от текущей позиции вниз)
- список не имеет ограничений по количеству элементов (бесконечный)
- при смене работника список автоматически пересчитывается и позиционируется на текущий день с учётом графика выбранного работника
- для оптимизации производительности можно ограничить количество одновременно загруженных элементов (например, загружать по 50-100 дней в каждую сторону от видимой области)

## Переименование работников

- при нажатии на пункт меню "Переименовать работника" в toolbar открывается диалог переименования
- переименовывается текущий выбранный работник (тот, который активен в выпадающем списке F1F)
- диалог содержит:
    - заголовок "Переименовать работника" или "Изменить имя"
    - текстовое поле с текущим именем работника (готово к редактированию)
    - кнопки "Сохранить" и "Отмена"
- валидация имени:
    - имя не может быть пустым (минимум 1 символ)
    - имя не может содержать только пробелы
    - максимальная длина имени: 50 символов (или другое разумное ограничение)
    - при попытке сохранить невалидное имя показывается сообщение об ошибке
- после успешного сохранения:
    - имя обновляется в выпадающем списке F1F
    - изменения сохраняются в локальное хранилище
    - имя работника обновляется в интерфейсе (в выпадающем списке отображается новое имя)
- имя работника используется только для отображения и не влияет на логику работы графика

## Хранение данных

- данные о графиках работников хранятся локально (SharedPreferences)
- для каждого работника сохраняется:
    - уникальный идентификатор работника (ID)
    - имя работника (по умолчанию "работник 1", "работник 2" и т.д., может быть изменено пользователем)
    - текущее смещение графика (количество сдвигов от начальной позиции)
- также храним состояние блокировки кнопок сдвига графика (заблокированы/разблокированы) - общее для всех работников

# Визуальное оформление

## Цветовая схема

- Дневная смена: зелёный (#4CAF50 или аналогичный)
- Ночная смена: тёмно-синий/индиго (#3F51B5 или аналогичный)
- Выходной (3-й день): жёлтый/оранжевый (#FF9800 или аналогичный)
- Выходной (4-й день): серый (#9E9E9E или аналогичный)
- Текущая дата: акцентный цвет или рамка (#2196F3 или аналогичный)

## Адаптивность

- интерфейс адаптируется под разные размеры экранов
- на планшетах можно отображать больше дней одновременно
- поддержка портретной и альбомной ориентации

# Дополнительные возможности (пока не нужно реализовывать)

- экспорт графика в календарь устройства
- уведомления о предстоящих сменах
- статистика: сколько дней каждого типа отработано за период
- возможность редактирования графика для конкретной даты (переопределение типа дня)
- синхронизация графиков между устройствами (если потребуется в будущем)# br-schedule
